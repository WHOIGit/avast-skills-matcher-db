(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{6869:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/edit_profile",function(){return r(8795)}])},8795:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return P}});var l=r(7568),i=r(9815),t=r(7582),a=r(5893),o=r(7294),s=r(7536),u=r(1163),c=r(2485),d=r(9417),v=r(4034),x=r(6886),f=r(5616),h=r(5861),m=r(480),j=r(9368),p=r(4054),Z=r(476),g=r(3457),b=r(6508),k=r(5137),C=r(6932),I=[{value:"WEEKS",label:"Weeks to months"},{value:"DAYS",label:"Days to weeks"},{value:"INCIDENTAL",label:"Incidental advice"}];function P(){var e=(0,u.useRouter)(),n=k.Z.useContainer(),r=(0,b.Z)(),P=r.profile,y=r.editExpertProfile,_=(0,s.cI)(),E=_.handleSubmit,w=_.control,D=_.formState.errors,N=_.reset,S=(0,o.useState)(""),T=S[0],R=S[1];(0,o.useEffect)((function(){var e,n,r,l;N({experience:null===P||void 0===P||null===(e=P.expertProfile)||void 0===e?void 0:e.experience,skills:null===P||void 0===P||null===(n=P.expertProfile)||void 0===n?void 0:n.skills,orcidId:null===P||void 0===P||null===(r=P.expertProfile)||void 0===r?void 0:r.orcidId,availability:null===P||void 0===P||null===(l=P.expertProfile)||void 0===l?void 0:l.availability})}),[N,P]);var V=function(){var n=(0,l.Z)((function(n){var r;return(0,t.__generator)(this,(function(l){switch(l.label){case 0:console.log(n),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,y(n)];case 2:return l.sent().ok?(R(""),e.push("/profile/me")):R("API connection error. Please try again later."),[3,4];case 3:return r=l.sent(),console.error(r),R(r.message),[3,4];case 4:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),A=function(e,n){var r=!1;return e.children.length&&(r=!0),n.value?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{label:e.name,control:(0,a.jsx)(j.Z,{value:e.id,checked:n.value.includes(e.id),onChange:function(e,r){r?n.onChange((0,i.Z)(n.value).concat([parseInt(e.target.value)])):n.onChange(n.value.filter((function(n){return n!==parseInt(e.target.value)})))}})},e.id),(0,a.jsx)(f.Z,{sx:{display:"flex",flexDirection:"column",ml:3},children:r&&e.children.map((function(e){return A(e,n)}))})]}):null};return P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(f.Z,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsx)(h.Z,{component:"h1",variant:"h5",children:"Edit SME Profile"}),(0,a.jsx)(c.Z,{sx:{m:1,bgcolor:"secondary.main",width:112,height:112},alt:null===P||void 0===P?void 0:P.firstName,src:null===P||void 0===P?void 0:P.avatar}),(0,a.jsxs)(h.Z,{component:"h1",variant:"h4",children:[null===P||void 0===P?void 0:P.firstName," ",null===P||void 0===P?void 0:P.lastName]}),(0,a.jsxs)(f.Z,{component:"form",noValidate:!0,onSubmit:E(V),sx:{mt:3,width:600},children:[(0,a.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,a.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,a.jsx)(s.Qr,{name:"experience",defaultValue:"",control:w,rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,l=n.value;return(0,a.jsx)(v.Z,{fullWidth:!0,multiline:!0,rows:8,onChange:r,value:l,label:"Describe your skills and experience",variant:"outlined"})}}),(0,a.jsx)(f.Z,{sx:{color:"error.main"},children:D.experience&&"Field is required"})]}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsxs)(p.Z,{component:"fieldset",variant:"standard",children:[(0,a.jsx)(Z.Z,{component:"legend",children:"Available for International Travel?"}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(s.Qr,{name:"internationalTravel",defaultValue:!1,control:w,render:function(e){var n=e.field;return(0,a.jsx)(m.Z,{label:"YES",control:(0,a.jsx)(j.Z,{value:!0,checked:n.value})},"internationalTravel")}})})]})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsxs)(p.Z,{component:"fieldset",variant:"standard",children:[(0,a.jsx)(Z.Z,{component:"legend",children:"Your Availability"}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(s.Qr,{name:"availability",defaultValue:[],control:w,render:function(e){var n=e.field;return(0,a.jsx)(a.Fragment,{children:I&&I.map((function(e){return function(e,n){return(0,a.jsx)(m.Z,{label:e.label,control:(0,a.jsx)(j.Z,{value:e.value,checked:n.value.includes(e.value),onChange:function(e,r){r?n.onChange((0,i.Z)(n.value).concat([e.target.value])):n.onChange(n.value.filter((function(n){return n!==e.target.value})))}})},e.value)}(e,n)}))})}})})]})}),(0,a.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,a.jsx)(s.Qr,{name:"orcidId",defaultValue:"",control:w,rules:{required:!1,pattern:{value:/https:\/\/orcid.org/i,message:"Must be a valid ORCID URL"}},render:function(e){var n=e.field,r=n.onChange,l=n.value;return(0,a.jsx)(v.Z,{fullWidth:!0,onChange:r,value:l,label:"ORCID ID",variant:"outlined",helperText:"ex: https://orcid.org/0000-0002-1111-2222"})}}),(0,a.jsx)(f.Z,{sx:{color:"error.main"},children:D.orcidId&&"Must be a valid ORCID URL"})]}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsxs)(p.Z,{component:"fieldset",variant:"standard",children:[(0,a.jsx)(Z.Z,{component:"legend",children:"Skills"}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(s.Qr,{name:"skills",defaultValue:[],control:w,render:function(e){var r=e.field;return(0,a.jsx)(a.Fragment,{children:n.skills&&n.skills.map((function(e){return A(e,r)}))})}})})]})})]}),(0,a.jsx)(d.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save Profile"}),(0,a.jsx)(f.Z,{sx:{color:"error.main"},children:T})]})]})]}):null}},6932:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var l=r(5893),i=(r(7294),r(5616)),t=r(8032),a=r(1023);function o(){return(0,l.jsx)(i.Z,{sx:{"& > :not(style)":{m:1}},children:(0,l.jsx)(t.Z,{color:"primary","aria-label":"back",size:"medium",onClick:function(){history.back()},children:(0,l.jsx)(a.Z,{})})})}}},function(e){e.O(0,[34,886,98,774,888,179],(function(){return n=6869,e(e.s=n);var n}));var n=e.O();_N_E=n}]);