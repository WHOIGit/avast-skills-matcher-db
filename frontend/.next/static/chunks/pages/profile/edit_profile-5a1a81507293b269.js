(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{6869:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/edit_profile",function(){return r(8795)}])},8795:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return y}});var l=r(7568),i=r(6042),t=r(9815),a=r(7582),o=r(5893),s=r(7294),c=r(7536),u=r(1163),d=r(2485),v=r(9417),x=r(4034),f=r(6886),h=r(5616),m=r(5861),j=r(480),p=r(9368),Z=r(4054),g=r(476),b=r(3457),k=r(6508),C=r(5137),I=r(6932),P=[{value:"WEEKS",label:"Weeks to months"},{value:"DAYS",label:"Days to weeks"},{value:"INCIDENTAL",label:"Incidental advice"}];function y(){var e=(0,u.useRouter)(),n=C.Z.useContainer(),r=(0,k.Z)(),y=r.profile,_=r.editExpertProfile,E=(0,c.cI)(),w=E.handleSubmit,D=E.control,N=E.formState.errors,S=E.reset,T=(0,s.useState)(""),R=T[0],A=T[1];(0,s.useEffect)((function(){var e,n,r,l;S({experience:null===y||void 0===y||null===(e=y.expertProfile)||void 0===e?void 0:e.experience,skills:null===y||void 0===y||null===(n=y.expertProfile)||void 0===n?void 0:n.skills,orcidId:null===y||void 0===y||null===(r=y.expertProfile)||void 0===r?void 0:r.orcidId,availability:null===y||void 0===y||null===(l=y.expertProfile)||void 0===l?void 0:l.availability})}),[S,y]);var F=function(){var n=(0,l.Z)((function(n){var r;return(0,a.__generator)(this,(function(l){switch(l.label){case 0:console.log(n),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,_(n)];case 2:return l.sent().ok?(A(""),e.push("/profile/me")):A("API connection error. Please try again later."),[3,4];case 3:return r=l.sent(),console.error(r),A(r.message),[3,4];case 4:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),O=function(e,n){var r=!1;return e.children.length&&(r=!0),n.value?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.Z,{label:e.name,control:(0,o.jsx)(p.Z,{value:e.id,checked:n.value.includes(e.id),onChange:function(e,r){r?n.onChange((0,t.Z)(n.value).concat([parseInt(e.target.value)])):n.onChange(n.value.filter((function(n){return n!==parseInt(e.target.value)})))}})},e.id),(0,o.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",ml:3},children:r&&e.children.map((function(e){return O(e,n)}))})]}):null};return y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I.Z,{}),(0,o.jsxs)(h.Z,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(m.Z,{component:"h1",variant:"h5",children:"Edit SME Profile"}),(0,o.jsx)(d.Z,{sx:{m:1,bgcolor:"secondary.main",width:112,height:112},alt:null===y||void 0===y?void 0:y.firstName,src:null===y||void 0===y?void 0:y.avatar}),(0,o.jsxs)(m.Z,{component:"h1",variant:"h4",children:[null===y||void 0===y?void 0:y.firstName," ",null===y||void 0===y?void 0:y.lastName]}),(0,o.jsxs)(h.Z,{component:"form",noValidate:!0,onSubmit:w(F),sx:{mt:3,width:600},children:[(0,o.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,o.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,o.jsx)(c.Qr,{name:"experience",defaultValue:"",control:D,rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,l=n.value;return(0,o.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:8,onChange:r,value:l,label:"Describe your skills and experience",variant:"outlined"})}}),(0,o.jsx)(h.Z,{sx:{color:"error.main"},children:N.experience&&"Field is required"})]}),(0,o.jsx)(f.ZP,{item:!0,xs:12,children:(0,o.jsxs)(Z.Z,{component:"fieldset",variant:"standard",children:[(0,o.jsx)(g.Z,{component:"legend",children:"Available for International Travel?"}),(0,o.jsx)(b.Z,{children:(0,o.jsx)(c.Qr,{name:"internationalTravel",control:D,render:function(e){var n=e.field;return(0,o.jsx)(j.Z,{label:"YES",control:(0,o.jsx)(p.Z,(0,i.Z)({},n))},"internationalTravel")}})})]})}),(0,o.jsx)(f.ZP,{item:!0,xs:12,children:(0,o.jsxs)(Z.Z,{component:"fieldset",variant:"standard",children:[(0,o.jsx)(g.Z,{component:"legend",children:"Your Availability"}),(0,o.jsx)(b.Z,{children:(0,o.jsx)(c.Qr,{name:"availability",defaultValue:[],control:D,render:function(e){var n=e.field;return(0,o.jsx)(o.Fragment,{children:P&&P.map((function(e){return function(e,n){return(0,o.jsx)(j.Z,{label:e.label,control:(0,o.jsx)(p.Z,{value:e.value,checked:n.value.includes(e.value),onChange:function(e,r){r?n.onChange((0,t.Z)(n.value).concat([e.target.value])):n.onChange(n.value.filter((function(n){return n!==e.target.value})))}})},e.value)}(e,n)}))})}})})]})}),(0,o.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,o.jsx)(c.Qr,{name:"orcidId",defaultValue:"",control:D,rules:{required:!1,pattern:{value:/https:\/\/orcid.org/i,message:"Must be a valid ORCID URL"}},render:function(e){var n=e.field,r=n.onChange,l=n.value;return(0,o.jsx)(x.Z,{fullWidth:!0,onChange:r,value:l,label:"ORCID ID",variant:"outlined",helperText:"ex: https://orcid.org/0000-0002-1111-2222"})}}),(0,o.jsx)(h.Z,{sx:{color:"error.main"},children:N.orcidId&&"Must be a valid ORCID URL"})]}),(0,o.jsx)(f.ZP,{item:!0,xs:12,children:(0,o.jsxs)(Z.Z,{component:"fieldset",variant:"standard",children:[(0,o.jsx)(g.Z,{component:"legend",children:"Skills"}),(0,o.jsx)(b.Z,{children:(0,o.jsx)(c.Qr,{name:"skills",defaultValue:[],control:D,render:function(e){var r=e.field;return(0,o.jsx)(o.Fragment,{children:n.skills&&n.skills.map((function(e){return O(e,r)}))})}})})]})})]}),(0,o.jsx)(v.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save Profile"}),(0,o.jsx)(h.Z,{sx:{color:"error.main"},children:R})]})]})]}):null}},6932:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var l=r(5893),i=(r(7294),r(5616)),t=r(8032),a=r(1023);function o(){return(0,l.jsx)(i.Z,{sx:{"& > :not(style)":{m:1}},children:(0,l.jsx)(t.Z,{color:"primary","aria-label":"back",size:"medium",onClick:function(){history.back()},children:(0,l.jsx)(a.Z,{})})})}}},function(e){e.O(0,[34,886,98,774,888,179],(function(){return n=6869,e(e.s=n);var n}));var n=e.O();_N_E=n}]);