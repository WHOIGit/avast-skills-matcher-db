(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{6296:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/me",function(){return r(9809)}])},9809:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Q}});var i=r(5427),t=r(5893),o=r(7294),l=r(1163),a=r(4471),s=r(9735),c=r(1233),d=r(2485),u=r(5616),p=r(5861),h=r(9417),v=r(7957),x=r(6540),f=r(8390),j=r(6508),Z=r(6042),m=r(9396),y=r(9534),b=r(760),P=r(44),g=r(8462),E=r(7212),T=r(8619),k=r(8885),_=r(9334),C=r(4603),w=r(1733),S=r(4048),I=r(6518),O=r(657),R=r(1425),A=r(6580),N=r(8951),M=r(7645),z=r(1292),D=r(3946),W=r(8037),X=r(5163);function B(e){var n=e.project,r=(0,X.Z)().deleteProject,a=(0,l.useRouter)(),s=(0,i.Z)(o.useState(!1),2),c=s[0],d=s[1],u=(0,i.Z)(o.useState(!1),2),p=u[0],v=u[1],x=function(){v(!1),d(!1),a.push("/profile/me?tabId=1")};return(0,t.jsxs)("div",{children:[(0,t.jsx)(z.Z,{title:"Delete Project",children:(0,t.jsx)(D.Z,{edge:"end","aria-label":"delete",onClick:function(){d(!0)},children:(0,t.jsx)(w.Z,{})})}),(0,t.jsxs)(O.Z,{open:c,onClose:x,children:[(0,t.jsxs)(M.Z,{children:["Delete Project - ",n.title]}),(0,t.jsx)(A.Z,{children:p?(0,t.jsxs)("div",{children:[(0,t.jsx)(W.Z,{color:"success",sx:{fontSize:80}}),(0,t.jsx)(N.Z,{children:"Project Deleted"})]}):(0,t.jsx)("div",{children:(0,t.jsxs)(N.Z,{children:["You are about to delete the Project - ",n.title,". Are you sure?"]})})}),!p&&(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(h.Z,{onClick:x,children:"Cancel"}),(0,t.jsx)(h.Z,{color:"error",onClick:function(){r(n.id),v(!0),setTimeout(x,2e3)},children:"Confirm Delete"})]})]})]})}var J=r(7720),Y=r(9055),H=r(7918);function q(e){var n=e.children,r=e.value,i=e.index,o=(0,y.Z)(e,["children","value","index"]);return(0,t.jsx)("div",(0,m.Z)((0,Z.Z)({role:"tabpanel",hidden:r!==i,id:"profile-tabpanel-".concat(i),"aria-labelledby":"profile-tab-".concat(i)},o),{children:r===i&&(0,t.jsx)(u.Z,{sx:{p:3},children:n})}))}function F(e){return{id:"profile-tab-".concat(e),"aria-controls":"profile-tabpanel-".concat(e)}}function L(e){var n,r,a,s,d,v,j,y,O,R,A,N,M,z=e.profile,D=e.showTab,W=(0,l.useRouter)(),X=(0,i.Z)(o.useState((null===(n=z.userType)||void 0===n?void 0:n.includes("EXPERT"))?0:1),2),L=X[0],K=X[1];o.useEffect((function(){K(D)}),[D]);var G=function(e){return(0,t.jsx)(E.ZP,{secondaryAction:(0,t.jsx)(B,{project:e}),disablePadding:!0,children:(0,t.jsxs)(T.Z,{onClick:function(){return n=e.id,void W.push("/profile/projects/edit/".concat(n));var n},dense:!0,children:[(0,t.jsx)(k.Z,{children:(0,t.jsx)(C.Z,{})}),(0,t.jsx)(_.Z,{id:e.id.toString(),primary:e.title})]})},e.id)};return z?(0,t.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,t.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(b.Z,{value:L,onChange:function(e,n){K(n)},"aria-label":"profile tabs",children:[(0,t.jsx)(P.Z,(0,m.Z)((0,Z.Z)({label:"SME Profile"},F(0)),{sx:{display:(null===(r=z.userType)||void 0===r?void 0:r.includes("EXPERT"))?"block":"none"}})),(0,t.jsx)(P.Z,(0,m.Z)((0,Z.Z)({label:"Your Projects"},F(1)),{sx:{display:(null===(a=z.userType)||void 0===a?void 0:a.includes("PROJECT_OWNER"))?"block":"none"}}))]})}),(0,t.jsx)(q,{value:L,index:0,children:(0,t.jsxs)(u.Z,{sx:{display:(null===(s=z.userType)||void 0===s?void 0:s.includes("EXPERT"))?"block":"none"},children:[(0,t.jsxs)(u.Z,{sx:{mb:2},children:[(0,t.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:"This is the profile information that will be publicly displayed in our searchable SME database."}),(0,t.jsx)(p.Z,{component:"h6",variant:"h6",children:"Your Skills"}),(0,t.jsx)(c.Z,{direction:"row",spacing:2,children:null===(d=z.expertProfile)||void 0===d?void 0:d.skills.map((function(e){return(0,t.jsx)(I.Z,{skillId:e},e)}))})]}),(null===(v=z.expertProfile)||void 0===v?void 0:v.internationalTravel)&&(0,t.jsx)(H.Z,{sx:{mt:1,mb:1},icon:(0,t.jsx)(Y.Z,{}),label:"Available for International Travel",variant:"outlined",color:"primary"}),(null===(j=z.expertProfile)||void 0===j?void 0:j.orcidId)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{component:"h6",variant:"h6",children:"ORCID ID"}),(0,t.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:(0,t.jsxs)(f.C,{href:null===(y=z.expertProfile)||void 0===y?void 0:y.orcidId,target:"_blank",children:[null===(O=z.expertProfile)||void 0===O?void 0:O.orcidId,(0,t.jsx)(S.Z,{})]})})]}),(0,t.jsx)(p.Z,{component:"h6",variant:"h6",children:"Availability"}),(0,t.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:null===(R=z.expertProfile)||void 0===R||null===(A=R.availabilityDisplay)||void 0===A?void 0:A.join(", ")}),(0,t.jsx)(p.Z,{component:"h6",variant:"h6",children:"Experience"}),(0,t.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:null===(N=z.expertProfile)||void 0===N?void 0:N.experience}),(0,t.jsx)(J.Z,{variant:"middle",sx:{my:2}}),(0,t.jsx)(h.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,t.jsx)(w.Z,{}),component:f.Z,to:{pathname:"/profile/delete_profile"},children:"Delete SME Profile"})]})}),(0,t.jsxs)(q,{value:L,index:1,children:[(0,t.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:"This is where you can create and manage Projects that you\u2019re looking to get assistance with from a SME on the site."}),(0,t.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,t.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/projects/add"},children:"Add Project"}),(0,t.jsx)(g.Z,{children:null===(M=z.projectsOwned)||void 0===M?void 0:M.map((function(e){return G(e)}))})]})]}):null}var K=function(e){var n=e.error;return(0,t.jsxs)("p",{children:["An Error Occurred: ",n]})},G=function(){return(0,t.jsx)("p",{children:"Authentication in progress..."})},Q=function(){var e,n,r,Z,m,y,b,P,g=(0,j.Z)().profile,E=(0,l.useRouter)().query,T=(0,i.Z)(o.useState(0),2),k=T[0],_=T[1];return o.useEffect((function(){E.tabId&&_(Number(E.tabId))}),[E]),(0,t.jsx)(a.Kv,{interactionType:s.s_.Redirect,errorComponent:K,loadingComponent:G,children:(0,t.jsxs)(u.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(d.Z,{sx:{m:1,bgcolor:"secondary.main",width:112,height:112},alt:null===g||void 0===g?void 0:g.firstName,src:null===g||void 0===g?void 0:g.avatar}),(0,t.jsxs)(u.Z,{sx:{textAlign:"center"},children:[(0,t.jsxs)(p.Z,{component:"h1",variant:"h4",children:[null===g||void 0===g?void 0:g.firstName," ",null===g||void 0===g?void 0:g.lastName]}),(0,t.jsx)(p.Z,{component:"div",variant:"subtitle1",children:null===g||void 0===g?void 0:g.email}),(0,t.jsx)(p.Z,{component:"div",variant:"subtitle1",children:null===g||void 0===g?void 0:g.title}),(0,t.jsxs)(c.Z,{sx:{mt:1},direction:"row",spacing:2,justifyContent:"center",children:[(0,t.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,t.jsx)(v.Z,{}),component:f.Z,to:{pathname:"/profile/edit"},children:"Edit Account"}),(null===g||void 0===g||null===(e=g.userType)||void 0===e?void 0:e.includes("EXPERT"))&&(0,t.jsxs)(h.Z,{variant:"contained",size:"small",startIcon:(null===g||void 0===g||null===(n=g.expertProfile)||void 0===n?void 0:n.experience)?(0,t.jsx)(v.Z,{}):(0,t.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/edit_profile"},children:[(null===g||void 0===g||null===(r=g.expertProfile)||void 0===r?void 0:r.experience)?"Edit":"Create"," SME Profile"]}),(null===g||void 0===g||null===(Z=g.userType)||void 0===Z?void 0:Z.includes("PROJECT_OWNER"))&&(0,t.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,t.jsx)(v.Z,{}),onClick:function(){_(1)},children:"Manage Projects"})]})]}),(0,t.jsx)(u.Z,{sx:{alignItems:"center",maxWidth:600,py:2},children:(null===g||void 0===g||null===(m=g.userType)||void 0===m?void 0:m.includes("EXPERT"))&&!(null===g||void 0===g||null===(y=g.expertProfile)||void 0===y?void 0:y.experience)&&(0,t.jsxs)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:["Welcome to the WHOI Skills Matcher DB! You\u2019re now registered as a SME on our site. Complete your"," ",(0,t.jsx)(f.Z,{to:{pathname:"/profile/edit_profile"},children:"SME Profile"})," ","and you are all set."]})}),(0,t.jsx)(u.Z,{sx:{mt:1,width:"100%"},children:(null===g||void 0===g?void 0:g.userType)&&(0,t.jsx)(L,{profile:g,showTab:k})}),!(null===g||void 0===g||null===(b=g.userType)||void 0===b?void 0:b.includes("EXPERT"))&&(0,t.jsxs)(u.Z,{sx:{maxWidth:600,py:2,textAlign:"center"},children:[(0,t.jsx)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to make your skills available to the WHOI community? Create a "SME Profile", and you will be listed in the Skills Matcher DB.'}),(0,t.jsx)(h.Z,{variant:"outlined",startIcon:(0,t.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/edit_profile"},children:"Create SME Profile"})]}),!(null===g||void 0===g||null===(P=g.userType)||void 0===P?void 0:P.includes("PROJECT_OWNER"))&&(0,t.jsxs)(u.Z,{sx:{maxWidth:600,py:2,textAlign:"center"},children:[(0,t.jsxs)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:["Want to contact a SME listed on our site? ",(0,t.jsx)("br",{}),'Create a "Project" that you can request assistance with from one of our users.']}),(0,t.jsx)(h.Z,{variant:"outlined",startIcon:(0,t.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/projects/add"},children:"Create Project"})]})]})})}},6518:function(e,n,r){"use strict";r.d(n,{Z:function(){return l}});var i=r(5893),t=(r(7294),r(7918)),o=r(5137);function l(e){var n=e.skillId,r=e.size,l=void 0===r?"medium":r,a=o.Z.useContainer(),s=function(e){function n(e,r){if(e.id===r)return e;if(e.children){var i=!0,t=!1,o=void 0;try{for(var l,a=e.children[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var s=n(l.value,r);if(s)return s}}catch(c){t=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(t)throw o}}}return null}var r=null;if(a.skills){var i=!0,t=!1,o=void 0;try{for(var l,s=a.skills[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){if(r=n(l.value,e))break}}catch(c){t=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(t)throw o}}}return r}(n);return a.skills?(0,i.jsx)(t.Z,{label:null===s||void 0===s?void 0:s.name,size:l}):null}},5163:function(e,n,r){"use strict";var i=r(7568),t=r(7582),o=r(8100),l=r(4471),a=r(314),s=r(4530),c=r(6508);n.Z=function(e){var n=(0,l.Fp)(),r=n.instance,d=(n.inProgress,(0,c.Z)().mutateProfile),u=(0,o.ZP)("".concat(s.Sg,"/api/projects/"),s._i),p=u.data,h=u.mutate,v=u.error,x=(0,o.ZP)(e?"".concat(s.Sg,"/api/projects/").concat(e,"/"):null,s._i),f=x.data,j=(x.error,function(){var e=(0,i.Z)((function(e){var n,i,o,l,c,u,p,h;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return n=(0,s.bf)("/api/projects/"),i={title:e.title,description:e.description,skills:e.skills},l=[n],c={method:"POST",body:JSON.stringify(i)},u={},h=(p="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,l.concat((c.headers=(u.Authorization=h.apply(p,[t.sent()]),u["Content-Type"]="application/json",u),c)))];case 2:return(o=t.sent()).ok&&d(),[2,o]}}))}));return function(n){return e.apply(this,arguments)}}()),Z=function(){var e=(0,i.Z)((function(e,n){var i,o,l,c,u,p,v,x;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return i=(0,s.bf)("/api/projects/".concat(e,"/")),o={title:n.title,description:n.description,skills:n.skills},c=[i],u={method:"PATCH",body:JSON.stringify(o)},p={},x=(v="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,c.concat((u.headers=(p.Authorization=x.apply(v,[t.sent()]),p["Content-Type"]="application/json",p),u)))];case 2:return(l=t.sent()).ok&&(h(),d()),[2,l]}}))}));return function(n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((function(e){var n,i,o,l,c,u,p;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return n=(0,s.bf)("/api/projects/".concat(e,"/")),o=[n],l={method:"DELETE"},c={},p=(u="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,o.concat((l.headers=(c.Authorization=p.apply(u,[t.sent()]),c["Content-Type"]="application/json",c),l)))];case 2:return(i=t.sent()).ok&&d(),[2,i]}}))}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((function(e,n){var i,o,l,c,d,u,p;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return i={projectId:e,message:n},o=(0,s.bf)("/api/users/contact_project_owner/"),l=[o],c={method:"POST",body:JSON.stringify(i)},d={},p=(u="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,l.concat((c.headers=(d.Authorization=p.apply(u,[t.sent()]),d["Content-Type"]="application/json",d),c)))];case 2:return[2,t.sent()]}}))}));return function(n,r){return e.apply(this,arguments)}}();return{projects:p,project:f,createProject:j,editProject:Z,deleteProject:m,isLoading:!p&&!v,isError:v,contactProjectOwner:y}}}},function(e){e.O(0,[645,785,774,888,179],(function(){return n=6296,e(e.s=n);var n}));var n=e.O();_N_E=n}]);