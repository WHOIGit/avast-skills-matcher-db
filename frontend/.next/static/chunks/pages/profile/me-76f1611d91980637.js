(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{6296:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/me",function(){return r(9809)}])},9809:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return K}});var t=r(5427),i=r(5893),o=r(7294),l=r(1163),a=r(4471),s=r(9735),c=r(1233),d=r(2485),u=r(5616),p=r(5861),h=r(9417),v=r(7957),x=r(6540),f=r(8390),j=r(6508),Z=r(6042),y=r(9396),m=r(9534),b=r(760),P=r(44),g=r(8462),E=r(7212),T=r(8619),k=r(8885),_=r(9334),C=r(4603),S=r(1733),w=r(4048),I=r(6518),O=r(657),A=r(1425),R=r(6580),N=r(8951),M=r(7645),z=r(1292),D=r(3946),W=r(8037),X=r(5163);function B(e){var n=e.project,r=(0,X.Z)().deleteProject,a=(0,l.useRouter)(),s=(0,t.Z)(o.useState(!1),2),c=s[0],d=s[1],u=(0,t.Z)(o.useState(!1),2),p=u[0],v=u[1],x=function(){v(!1),d(!1),a.push("/profile/me?tabId=1")};return(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{title:"Delete Project",children:(0,i.jsx)(D.Z,{edge:"end","aria-label":"delete",onClick:function(){d(!0)},children:(0,i.jsx)(S.Z,{})})}),(0,i.jsxs)(O.Z,{open:c,onClose:x,children:[(0,i.jsxs)(M.Z,{children:["Delete Project - ",n.title]}),(0,i.jsx)(R.Z,{children:p?(0,i.jsxs)("div",{children:[(0,i.jsx)(W.Z,{color:"success",sx:{fontSize:80}}),(0,i.jsx)(N.Z,{children:"Project Deleted"})]}):(0,i.jsx)("div",{children:(0,i.jsxs)(N.Z,{children:["You are about to delete the Project - ",n.title,". Are you sure?"]})})}),!p&&(0,i.jsxs)(A.Z,{children:[(0,i.jsx)(h.Z,{onClick:x,children:"Cancel"}),(0,i.jsx)(h.Z,{color:"error",onClick:function(){r(n.id),v(!0),setTimeout(x,2e3)},children:"Confirm Delete"})]})]})]})}var J=r(7720);function Y(e){var n=e.children,r=e.value,t=e.index,o=(0,m.Z)(e,["children","value","index"]);return(0,i.jsx)("div",(0,y.Z)((0,Z.Z)({role:"tabpanel",hidden:r!==t,id:"profile-tabpanel-".concat(t),"aria-labelledby":"profile-tab-".concat(t)},o),{children:r===t&&(0,i.jsx)(u.Z,{sx:{p:3},children:n})}))}function q(e){return{id:"profile-tab-".concat(e),"aria-controls":"profile-tabpanel-".concat(e)}}function F(e){var n,r,a,s,d,v,j,m,O,A,R,N,M=e.profile,z=e.showTab,D=(0,l.useRouter)(),W=(0,t.Z)(o.useState((null===(n=M.userType)||void 0===n?void 0:n.includes("EXPERT"))?0:1),2),X=W[0],F=W[1];o.useEffect((function(){F(z)}),[z]);var H=function(e){return(0,i.jsx)(E.ZP,{secondaryAction:(0,i.jsx)(B,{project:e}),disablePadding:!0,children:(0,i.jsxs)(T.Z,{onClick:function(){return n=e.id,void D.push("/profile/projects/edit/".concat(n));var n},dense:!0,children:[(0,i.jsx)(k.Z,{children:(0,i.jsx)(C.Z,{})}),(0,i.jsx)(_.Z,{id:e.id.toString(),primary:e.title})]})},e.id)};return M?(0,i.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,i.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(b.Z,{value:X,onChange:function(e,n){F(n)},"aria-label":"profile tabs",children:[(0,i.jsx)(P.Z,(0,y.Z)((0,Z.Z)({label:"SME Profile"},q(0)),{sx:{display:(null===(r=M.userType)||void 0===r?void 0:r.includes("EXPERT"))?"block":"none"}})),(0,i.jsx)(P.Z,(0,y.Z)((0,Z.Z)({label:"Your Projects"},q(1)),{sx:{display:(null===(a=M.userType)||void 0===a?void 0:a.includes("PROJECT_OWNER"))?"block":"none"}}))]})}),(0,i.jsx)(Y,{value:X,index:0,children:(0,i.jsxs)(u.Z,{sx:{display:(null===(s=M.userType)||void 0===s?void 0:s.includes("EXPERT"))?"block":"none"},children:[(0,i.jsxs)(u.Z,{sx:{mb:2},children:[(0,i.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:"This is the profile information that will be publicly displayed in our searchable SME database."}),(0,i.jsx)(p.Z,{component:"h6",variant:"h6",children:"Your Skills"}),(0,i.jsx)(c.Z,{direction:"row",spacing:2,children:null===(d=M.expertProfile)||void 0===d?void 0:d.skills.map((function(e){return(0,i.jsx)(I.Z,{skillId:e},e)}))})]}),(null===(v=M.expertProfile)||void 0===v?void 0:v.orcidId)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{component:"h6",variant:"h6",children:"ORCID ID"}),(0,i.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:(0,i.jsxs)(f.C,{href:null===(j=M.expertProfile)||void 0===j?void 0:j.orcidId,target:"_blank",children:[null===(m=M.expertProfile)||void 0===m?void 0:m.orcidId,(0,i.jsx)(w.Z,{})]})})]}),(0,i.jsx)(p.Z,{component:"h6",variant:"h6",children:"Availability"}),(0,i.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:null===(O=M.expertProfile)||void 0===O||null===(A=O.availabilityDisplay)||void 0===A?void 0:A.join(", ")}),(0,i.jsx)(p.Z,{component:"h6",variant:"h6",children:"Experience"}),(0,i.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:null===(R=M.expertProfile)||void 0===R?void 0:R.experience}),(0,i.jsx)(J.Z,{variant:"middle",sx:{my:2}}),(0,i.jsx)(h.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,i.jsx)(S.Z,{}),component:f.Z,to:{pathname:"/profile/delete_profile"},children:"Delete SME Profile"})]})}),(0,i.jsxs)(Y,{value:X,index:1,children:[(0,i.jsx)(p.Z,{component:"p",variant:"body1",paragraph:!0,children:"This is where you can create and manage Projects that you\u2019re looking to get assistance with from a SME on the site."}),(0,i.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,i.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/projects/add"},children:"Add Project"}),(0,i.jsx)(g.Z,{children:null===(N=M.projectsOwned)||void 0===N?void 0:N.map((function(e){return H(e)}))})]})]}):null}var H=function(e){var n=e.error;return(0,i.jsxs)("p",{children:["An Error Occurred: ",n]})},L=function(){return(0,i.jsx)("p",{children:"Authentication in progress..."})},K=function(){var e,n,r,Z,y,m,b,P,g=(0,j.Z)().profile,E=(0,l.useRouter)().query,T=(0,t.Z)(o.useState(0),2),k=T[0],_=T[1];return o.useEffect((function(){E.tabId&&_(Number(E.tabId))}),[E]),(0,i.jsx)(a.Kv,{interactionType:s.s_.Redirect,errorComponent:H,loadingComponent:L,children:(0,i.jsxs)(u.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)(d.Z,{sx:{m:1,bgcolor:"secondary.main",width:112,height:112},alt:null===g||void 0===g?void 0:g.firstName,src:null===g||void 0===g?void 0:g.avatar}),(0,i.jsxs)(u.Z,{sx:{textAlign:"center"},children:[(0,i.jsxs)(p.Z,{component:"h1",variant:"h4",children:[null===g||void 0===g?void 0:g.firstName," ",null===g||void 0===g?void 0:g.lastName]}),(0,i.jsx)(p.Z,{component:"div",variant:"subtitle1",children:null===g||void 0===g?void 0:g.email}),(0,i.jsx)(p.Z,{component:"div",variant:"subtitle1",children:null===g||void 0===g?void 0:g.title}),(0,i.jsxs)(c.Z,{sx:{mt:1},direction:"row",spacing:2,justifyContent:"center",children:[(0,i.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,i.jsx)(v.Z,{}),component:f.Z,to:{pathname:"/profile/edit"},children:"Edit Account"}),(null===g||void 0===g||null===(e=g.userType)||void 0===e?void 0:e.includes("EXPERT"))&&(0,i.jsxs)(h.Z,{variant:"contained",size:"small",startIcon:(null===g||void 0===g||null===(n=g.expertProfile)||void 0===n?void 0:n.experience)?(0,i.jsx)(v.Z,{}):(0,i.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/edit_profile"},children:[(null===g||void 0===g||null===(r=g.expertProfile)||void 0===r?void 0:r.experience)?"Edit":"Create"," SME Profile"]}),(null===g||void 0===g||null===(Z=g.userType)||void 0===Z?void 0:Z.includes("PROJECT_OWNER"))&&(0,i.jsx)(h.Z,{variant:"contained",size:"small",startIcon:(0,i.jsx)(v.Z,{}),onClick:function(){_(1)},children:"Manage Projects"})]})]}),(0,i.jsx)(u.Z,{sx:{alignItems:"center",maxWidth:600,py:2},children:(null===g||void 0===g||null===(y=g.userType)||void 0===y?void 0:y.includes("EXPERT"))&&!(null===g||void 0===g||null===(m=g.expertProfile)||void 0===m?void 0:m.experience)&&(0,i.jsxs)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:["Welcome to the AVAST Skills Matcher DB! You\u2019re now registered as a SME on our site. Complete your"," ",(0,i.jsx)(f.Z,{to:{pathname:"/profile/edit_profile"},children:"SME Profile"})," ","and you are all set."]})}),(0,i.jsx)(u.Z,{sx:{mt:1,width:"100%"},children:(null===g||void 0===g?void 0:g.userType)&&(0,i.jsx)(F,{profile:g,showTab:k})}),!(null===g||void 0===g||null===(b=g.userType)||void 0===b?void 0:b.includes("EXPERT"))&&(0,i.jsxs)(u.Z,{sx:{maxWidth:600,py:2,textAlign:"center"},children:[(0,i.jsx)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to make your skills available to the WHOI community? Create a "SME Profile", and you will be listed in the Skills Matcher DB.'}),(0,i.jsx)(h.Z,{variant:"outlined",startIcon:(0,i.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/edit_profile"},children:"Create SME Profile"})]}),!(null===g||void 0===g||null===(P=g.userType)||void 0===P?void 0:P.includes("PROJECT_OWNER"))&&(0,i.jsxs)(u.Z,{sx:{maxWidth:600,py:2,textAlign:"center"},children:[(0,i.jsxs)(p.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:["Want to contact a SME listed on our site? ",(0,i.jsx)("br",{}),'Create a "Project" that you can request assistance with from one of our users.']}),(0,i.jsx)(h.Z,{variant:"outlined",startIcon:(0,i.jsx)(x.Z,{}),component:f.Z,to:{pathname:"/profile/projects/add"},children:"Create Project"})]})]})})}},6518:function(e,n,r){"use strict";r.d(n,{Z:function(){return l}});var t=r(5893),i=(r(7294),r(7918)),o=r(5137);function l(e){var n=e.skillId,r=e.size,l=void 0===r?"medium":r,a=o.Z.useContainer(),s=function(e){function n(e,r){if(e.id===r)return e;if(e.children){var t=!0,i=!1,o=void 0;try{for(var l,a=e.children[Symbol.iterator]();!(t=(l=a.next()).done);t=!0){var s=n(l.value,r);if(s)return s}}catch(c){i=!0,o=c}finally{try{t||null==a.return||a.return()}finally{if(i)throw o}}}return null}var r=null;if(a.skills){var t=!0,i=!1,o=void 0;try{for(var l,s=a.skills[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){if(r=n(l.value,e))break}}catch(c){i=!0,o=c}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}}return r}(n);return a.skills?(0,t.jsx)(i.Z,{label:null===s||void 0===s?void 0:s.name,size:l}):null}},5163:function(e,n,r){"use strict";var t=r(7568),i=r(7582),o=r(8100),l=r(4471),a=r(314),s=r(4530),c=r(6508);n.Z=function(e){var n=(0,l.Fp)(),r=n.instance,d=(n.inProgress,(0,c.Z)().mutateProfile),u=(0,o.ZP)("".concat(s.Sg,"/api/projects/"),s._i),p=u.data,h=u.mutate,v=u.error,x=(0,o.ZP)(e?"".concat(s.Sg,"/api/projects/").concat(e,"/"):null,s._i),f=x.data,j=(x.error,function(){var e=(0,t.Z)((function(e){var n,t,o,l,c,u,p,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,s.bf)("/api/projects/"),t={title:e.title,description:e.description,skills:e.skills},l=[n],c={method:"POST",body:JSON.stringify(t)},u={},h=(p="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,l.concat((c.headers=(u.Authorization=h.apply(p,[i.sent()]),u["Content-Type"]="application/json",u),c)))];case 2:return(o=i.sent()).ok&&d(),[2,o]}}))}));return function(n){return e.apply(this,arguments)}}()),Z=function(){var e=(0,t.Z)((function(e,n){var t,o,l,c,u,p,v,x;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,s.bf)("/api/projects/".concat(e,"/")),o={title:n.title,description:n.description,skills:n.skills},c=[t],u={method:"PATCH",body:JSON.stringify(o)},p={},x=(v="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,c.concat((u.headers=(p.Authorization=x.apply(v,[i.sent()]),p["Content-Type"]="application/json",p),u)))];case 2:return(l=i.sent()).ok&&(h(),d()),[2,l]}}))}));return function(n,r){return e.apply(this,arguments)}}(),y=function(){var e=(0,t.Z)((function(e){var n,t,o,l,c,u,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,s.bf)("/api/projects/".concat(e,"/")),o=[n],l={method:"DELETE"},c={},p=(u="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,o.concat((l.headers=(c.Authorization=p.apply(u,[i.sent()]),c["Content-Type"]="application/json",c),l)))];case 2:return(t=i.sent()).ok&&d(),[2,t]}}))}));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,t.Z)((function(e,n){var t,o,l,c,d,u,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t={projectId:e,message:n},o=(0,s.bf)("/api/users/contact_project_owner/"),l=[o],c={method:"POST",body:JSON.stringify(t)},d={},p=(u="Bearer ").concat,[4,(0,a.a)(r)];case 1:return[4,fetch.apply(void 0,l.concat((c.headers=(d.Authorization=p.apply(u,[i.sent()]),d["Content-Type"]="application/json",d),c)))];case 2:return[2,i.sent()]}}))}));return function(n,r){return e.apply(this,arguments)}}();return{projects:p,project:f,createProject:j,editProject:Z,deleteProject:y,isLoading:!p&&!v,isError:v,contactProjectOwner:m}}}},function(e){e.O(0,[645,633,774,888,179],(function(){return n=6296,e(e.s=n);var n}));var n=e.O();_N_E=n}]);