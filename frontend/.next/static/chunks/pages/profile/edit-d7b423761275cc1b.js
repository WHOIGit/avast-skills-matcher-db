(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{1170:function(e,r,n){"use strict";var i=n(4836);r.Z=void 0;var a=i(n(4938)),t=n(5893);r.Z=(0,a.default)([(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,t.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera")},3914:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/edit",function(){return n(7243)}])},7243:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var i=n(7568),a=n(5427),t=n(7582),s=n(5893),l=n(7294),o=n(7536),u=n(1163),c=n(948),d=n(2485),m=n(9417),f=n(4034),h=n(1233),v=n(6886),x=n(5616),j=n(1170),p=n(5861),Z=n(6815),g=n(6508),b=n(6932),C=n(4530),y=("".concat(C.Sg,"/api/users/me/"),(0,c.ZP)("input")({display:"none"}));function N(){var e,r,n,c=(0,u.useRouter)(),C=(0,g.Z)(),N=C.profile,P=C.editProfile,_=C.uploadAvatar,E=(0,a.Z)(l.useState(""),2),w=E[0],I=E[1],S=(0,o.cI)(),k=S.handleSubmit,V=S.control,W=S.formState.errors,A=S.reset,Q=(0,a.Z)(l.useState(""),2),q=Q[0],F=Q[1];l.useEffect((function(){(null===N||void 0===N?void 0:N.avatar)&&I(N.avatar),A({firstName:null===N||void 0===N?void 0:N.firstName,lastName:null===N||void 0===N?void 0:N.lastName,email:null===N||void 0===N?void 0:N.email,title:null===N||void 0===N?void 0:N.title,supervisorEmail:null===N||void 0===N?void 0:N.supervisorEmail})}),[A,N]);var T=function(){var e=(0,i.Z)((function(e){var r,n;return(0,t.__generator)(this,(function(i){switch(i.label){case 0:r=e.target.files[0],i.label=1;case 1:return i.trys.push([1,3,,4]),[4,_(r)];case 2:return i.sent().ok?F(""):F("API connection error. Please try again later."),[3,4];case 3:return n=i.sent(),console.error(n),F(n.message),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),L=function(){var e=(0,i.Z)((function(e){var r;return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,P(e.firstName,e.lastName,e.title,e.supervisorEmail)];case 1:return n.sent().ok?(F(""),c.push("/profile/me")):F("API connection error. Please try again later."),[3,3];case 2:return r=n.sent(),console.error(r),F(r.message),[3,3];case 3:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{}),(0,s.jsxs)(x.Z,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(p.Z,{component:"h1",variant:"h5",children:"Edit Account"}),(0,s.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,s.jsx)(d.Z,{sx:{m:1,bgcolor:"secondary.main",width:56,height:56},alt:null===N||void 0===N?void 0:N.firstName,src:w}),(0,s.jsxs)("label",{htmlFor:"avatar-image",children:[(0,s.jsx)(y,{accept:"image/*",id:"avatar-image",name:"avatar-image",type:"file",onChange:T}),(0,s.jsx)(m.Z,{variant:"contained",component:"span",startIcon:(0,s.jsx)(j.Z,{}),children:"Change Profile Image"})]})]}),(0,s.jsxs)(x.Z,{component:"form",noValidate:!0,onSubmit:k(L),sx:{mt:3},children:[(0,s.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,s.jsxs)(v.ZP,{item:!0,xs:12,sm:6,children:[(0,s.jsx)(o.Qr,{name:"firstName",defaultValue:"",control:V,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,s.jsx)(f.Z,{fullWidth:!0,onChange:n,value:i,label:"First Name",variant:"outlined"})}}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:W.firstName&&"First name is required"})]}),(0,s.jsxs)(v.ZP,{item:!0,xs:12,sm:6,children:[(0,s.jsx)(o.Qr,{name:"lastName",defaultValue:"",control:V,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,s.jsx)(f.Z,{fullWidth:!0,label:"Last Name",onChange:n,value:i})}}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:W.lastName&&"Last name is required"})]}),(0,s.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,s.jsx)(o.Qr,{name:"email",defaultValue:"",control:V,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,s.jsx)(f.Z,{disabled:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:n,value:i})}}),(0,s.jsx)(Z.Z,{children:"Email field is not editable. Please contact WHOI IS if there is an issue."}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:null===(e=W.email)||void 0===e?void 0:e.message})]}),(0,s.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,s.jsx)(o.Qr,{name:"title",defaultValue:"",control:V,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,s.jsx)(f.Z,{fullWidth:!0,id:"title",label:"Title",onChange:n,value:i})}}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:null===(r=W.email)||void 0===r?void 0:r.message})]}),(0,s.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,s.jsx)(o.Qr,{name:"supervisorEmail",defaultValue:"",control:V,render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,s.jsx)(f.Z,{fullWidth:!0,id:"supervisorEmail",label:"Supervisor Email",onChange:n,value:i})}}),(0,s.jsx)(Z.Z,{children:"Supervisor email is optional. Include a CC email for your supervisor if required. A copy of any assistance requests sent to you will be CC\u2019ed to them."}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:null===(n=W.email)||void 0===n?void 0:n.message})]})]}),(0,s.jsx)(m.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save Profile"}),(0,s.jsx)(x.Z,{sx:{color:"error.main"},children:q})]})]})]})}},6932:function(e,r,n){"use strict";n.d(r,{Z:function(){return l}});var i=n(5893),a=(n(7294),n(5616)),t=n(8032),s=n(1023);function l(){return(0,i.jsx)(a.Z,{sx:{"& > :not(style)":{m:1}},children:(0,i.jsx)(t.Z,{color:"primary","aria-label":"back",size:"medium",onClick:function(){history.back()},children:(0,i.jsx)(s.Z,{})})})}}},function(e){e.O(0,[34,886,98,774,888,179],(function(){return r=3914,e(e.s=r);var r}));var r=e.O();_N_E=r}]);