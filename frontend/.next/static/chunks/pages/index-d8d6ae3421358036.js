(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4577)}])},4577:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(5893),i=n(7294),a=n(5861),s=n(5616),o=n(5582),c=n(1233),l=n(7720),u=n(9417),d=n(6540),x=n(8390),f=n(5427),h=n(6886),p=n(5137),v=n(5767),Z=n(8100),j=n(4530);var m=n(4471),y=n(948),g=n(6242),b=n(8445),S=n(4267),k=n(2023),C=n(2485),E=n(3946),P=n(6395),w=n(1975),_=n(1292),T=n(7856),M=n.n(T),N=n(6518),O=n(7568),I=n(7582),W=n(314),A=n(6508),F="".concat(j.Sg,"/api/users/me/"),R="".concat(j.Sg,"/api/experts/");var z=n(9619),B=n(3221),L=(0,y.ZP)("ul")((function(e){return{display:"flex",flexWrap:"wrap",listStyle:"none",padding:0,margin:0,"& > li":{padding:e.theme.spacing(.5)}}}));function q(e){var t,n,s,o=e.expert,c=(0,m.kq)(),l=function(e){var t=(0,m.Fp)(),n=t.instance,r=(t.inProgress,(0,A.Z)().profile),a=(0,Z.kY)().mutate,s=(0,f.Z)(i.useState(!1),2),o=s[0],c=s[1],l=(0,f.Z)(i.useState(0),2),u=l[0],d=l[1];function x(){return h.apply(this,arguments)}function h(){return(h=(0,O.Z)((function(){var t,r,i,a,s,o,c;return(0,I.__generator)(this,(function(l){switch(l.label){case 0:return t={expert:e.id},r=(0,j.bf)("/api/favorites/"),i=[r],a={method:"POST",body:JSON.stringify(t)},s={},c=(o="Bearer ").concat,[4,(0,W.a)(n)];case 1:return[4,fetch.apply(void 0,i.concat((a.headers=(s.Authorization=c.apply(o,[l.sent()]),s["Content-Type"]="application/json",s),a)))];case 2:return[2,l.sent()]}}))}))).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,O.Z)((function(){var e,t,r,i,a,s;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return u?(e=(0,j.bf)("/api/favorites/".concat(u,"/")),t=[e],r={method:"DELETE"},i={},s=(a="Bearer ").concat,[4,(0,W.a)(n)]):[2,null];case 1:return[4,fetch.apply(void 0,t.concat((r.headers=(i.Authorization=s.apply(a,[o.sent()]),i["Content-Type"]="application/json",i),r)))];case 2:return[2,o.sent()]}}))}))).apply(this,arguments)}function y(){return(y=(0,O.Z)((function(){var e;return(0,I.__generator)(this,(function(t){switch(t.label){case 0:return o?[4,p()]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,x()];case 3:e=t.sent(),t.label=4;case 4:return(null===e||void 0===e?void 0:e.ok)&&(a(F),a(R)),[2]}}))}))).apply(this,arguments)}return i.useEffect((function(){if(r){var t=e.favoredBy.map((function(e){return e.user})).includes(r.id);if(c(t),t){var n=e.favoredBy.find((function(e){return e.user===r.id}));n&&d(n.id)}}}),[r,e]),{isFavorite:o,toggleFavorite:function(){return y.apply(this,arguments)}}}(o),u=l.isFavorite,d=l.toggleFavorite,h=(0,f.Z)(i.useState("default"),2),p=h[0],v=h[1];return i.useEffect((function(){v(u?"secondary":"default")}),[u]),(0,r.jsxs)(g.Z,{sx:{height:380},children:[(0,r.jsx)(b.Z,{avatar:(0,r.jsx)(C.Z,{sx:{bgcolor:"secondary.main"},"aria-label":"expert",component:x.Z,to:{pathname:"/experts/".concat(o.id)},alt:o.firstName,src:o.avatar}),action:(0,r.jsx)(E.Z,{component:x.Z,to:{pathname:"/experts/".concat(o.id)},children:(0,r.jsx)(P.Z,{})}),title:(0,r.jsx)(x.C,{href:"/experts/".concat(o.id),underline:"hover",children:"".concat(o.firstName," ").concat(o.lastName)}),subheader:o.title}),(0,r.jsxs)(S.Z,{sx:{pt:0},children:[(0,r.jsx)(L,{children:null===(t=o.expertProfile)||void 0===t||null===(n=t.skills)||void 0===n?void 0:n.map((function(e){return(0,r.jsx)("li",{children:(0,r.jsx)(N.Z,{skillId:e,size:"small"},e)},e)}))}),(0,r.jsx)(a.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:(0,r.jsx)(M(),{line:4,element:"span",truncateText:"...",text:null===(s=o.expertProfile)||void 0===s?void 0:s.experience})})]}),(0,r.jsx)(k.Z,{disableSpacing:!0,children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{title:"Add to Favorites",children:(0,r.jsx)(E.Z,{"aria-label":"add to favorites",color:p,onClick:d,children:(0,r.jsx)(w.Z,{})})}),(0,r.jsx)(z.Z,{expert:o,buttonType:"icon"})]}):(0,r.jsx)(B.Z,{item:o})})]})}function D(){var e=v.Z.useContainer(),t=p.Z.useContainer(),n=function(){var e=(0,Z.ZP)("".concat(j.Sg,"/api/experts/"),j._i),t=e.data,n=e.error;return{experts:t,isLoading:!t&&!n,isError:n}}(),a=n.experts,s=(n.isLoading,n.isError,function(e){var t;e&&(t=new URLSearchParams({q:e}));var n=(0,Z.ZP)(t?"".concat(j.Sg,"/api/experts/?").concat(t):null,j._i),r=n.data,i=n.error;return{results:r,isLoading:!r&&!i,isError:i}}(e.searchTerms).results),o=(0,f.Z)(i.useState(a),2),c=o[0],l=o[1];return i.useEffect((function(){var e;if(e=s||a)if(t.selectedSkills.length){var n=t.selectedSkills.map((function(e){return e.id})),r=e.filter((function(e){return t.filterInclusive?n.some((function(t){return e.expertProfile.skills.includes(t)})):n.every((function(t){return e.expertProfile.skills.includes(t)}))}));l(r)}else l(e)}),[a,s,t.filterInclusive,t.selectedSkills]),c?(0,r.jsx)(h.ZP,{container:!0,spacing:2,children:c.map((function(e){return(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(q,{expert:e})},e.id)}))}):null}function X(){var e,t,n=(0,A.Z)().profile;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{bgcolor:"background.paper",pt:3,pb:3},children:(0,r.jsxs)(o.Z,{maxWidth:"md",children:[(0,r.jsx)(a.Z,{component:"h1",variant:"h4",align:"center",color:"text.primary",gutterBottom:!0,children:"Welcome to the AVAST Skills Matcher DB"}),(0,r.jsxs)(c.Z,{sx:{mt:3},direction:"row",spacing:6,justifyContent:"center",divider:(0,r.jsx)(l.Z,{orientation:"vertical",flexItem:!0}),children:[!(null===n||void 0===n||null===(e=n.userType)||void 0===e?void 0:e.includes("EXPERT"))&&(0,r.jsxs)(s.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(a.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to make your skills available to the WHOI community? Create a "SME Profile", and you will be listed in the Skills Matcher DB.'}),(0,r.jsx)(u.Z,{variant:"contained",startIcon:(0,r.jsx)(d.Z,{}),component:x.Z,to:{pathname:"/profile/me"},children:"Create SME Profile"})," "]}),!(null===n||void 0===n||null===(t=n.userType)||void 0===t?void 0:t.includes("PROJECT_OWNER"))&&(0,r.jsxs)(s.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(a.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to contact an SME listed on our site? Create a "Project" that you can request assistance with from one of our users.'}),(0,r.jsx)(u.Z,{variant:"outlined",startIcon:(0,r.jsx)(d.Z,{}),component:x.Z,to:{pathname:"/profile/me"},children:"Create Project"})]})]})]})}),(0,r.jsx)(s.Z,{sx:{my:2},children:(0,r.jsxs)(a.Z,{variant:"body1",color:"text.secondary",paragraph:!0,children:["The following ",(0,r.jsx)("strong",{children:"SMEs (Subject Matter Experts)"})," are available to contact for assistance:"]})}),(0,r.jsx)(s.Z,{sx:{my:4},children:(0,r.jsx)(D,{})})]})}},9619:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(5427),i=n(9815),a=n(5893),s=n(7294),o=n(9417),c=n(4034),l=n(657),u=n(1425),d=n(6580),x=n(8951),f=n(7645),h=n(6307),p=n(8462),v=n(7212),Z=n(8619),j=n(8885),m=n(9334),y=n(9368),g=n(3946),b=n(8037),S=n(1292),k=n(6508);function C(e){var t=e.expert,n=e.buttonType,C=void 0===n?"standard":n,E=(0,k.Z)(),P=E.profile,w=E.contactExpert,_=null===P||void 0===P?void 0:P.projectsOwned,T=s.useRef(),M=(0,r.Z)(s.useState(!1),2),N=M[0],O=M[1],I=(0,r.Z)(s.useState([0]),2),W=I[0],A=I[1],F=(0,r.Z)(s.useState(!1),2),R=F[0],z=F[1],B=function(){O(!0)},L=function(){z(!1),O(!1)};return(0,a.jsxs)("div",{children:["standard"===C&&(0,a.jsx)(o.Z,{sx:{my:2},variant:"contained",onClick:B,size:"small",startIcon:(0,a.jsx)(h.Z,{}),children:"Contact SME"}),"icon"===C&&(0,a.jsx)(S.Z,{title:"Contact SME",children:(0,a.jsx)(g.Z,{"aria-label":"contact SME",color:"default",onClick:B,children:(0,a.jsx)(h.Z,{})})}),(0,a.jsxs)(l.Z,{open:N,onClose:L,children:[(0,a.jsxs)(f.Z,{children:["Contact ",t.firstName," ",t.lastName]}),(0,a.jsx)(d.Z,{children:R?(0,a.jsxs)("div",{children:[(0,a.jsx)(b.Z,{color:"success",sx:{fontSize:80}}),(0,a.jsx)(x.Z,{children:"Message sent!"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{children:"To contact this SME, you can select one of your Projects that you\u2019d like to work with them on, or just send a direct message. We will send them your Project and contact details and notify you if they\u2019re interested."}),(0,a.jsx)(p.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:null===_||void 0===_?void 0:_.map((function(e){var t,n="checkbox-list-label-".concat(e.id);return(0,a.jsx)(v.ZP,{disablePadding:!0,children:(0,a.jsxs)(Z.Z,{role:void 0,onClick:(t=e.id,function(){var e=W.indexOf(t),n=(0,i.Z)(W);-1===e?n.push(t):n.splice(e,1),A(n)}),dense:!0,children:[(0,a.jsx)(j.Z,{children:(0,a.jsx)(y.Z,{edge:"start",checked:-1!==W.indexOf(e.id),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n}})}),(0,a.jsx)(m.Z,{id:n,primary:e.title})]})},e.id)}))}),(0,a.jsx)(c.Z,{fullWidth:!0,multiline:!0,rows:6,label:"Message",variant:"outlined",inputRef:T})]})}),!R&&(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(o.Z,{onClick:L,children:"Cancel"}),(0,a.jsx)(o.Z,{onClick:function(){w(t.id,T.current.value,W),z(!0),setTimeout(L,2e3)},children:"Send Request"})]})]})]})}},6518:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893),i=(n(7294),n(7918)),a=n(5137);function s(e){var t=e.skillId,n=e.size,s=void 0===n?"medium":n,o=a.Z.useContainer(),c=function(e){function t(e,n){if(e.id===n)return e;if(e.children){var r=!0,i=!1,a=void 0;try{for(var s,o=e.children[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=t(s.value,n);if(c)return c}}catch(l){i=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}return null}var n=null;if(o.skills){var r=!0,i=!1,a=void 0;try{for(var s,c=o.skills[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){if(n=t(s.value,e))break}}catch(l){i=!0,a=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}return n}(t);return o.skills?(0,r.jsx)(i.Z,{label:null===c||void 0===c?void 0:c.name,size:s}):null}},3221:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(5427),i=n(5893),a=n(7294),s=n(9417),o=n(657),c=n(1425),l=n(6580),u=n(8951),d=n(7645),x=n(6307),f=n(8390),h=n(3946),p=n(5616);function v(e){var t,n=e.item,v=(0,r.Z)(a.useState(!1),2),Z=v[0],j=v[1];t=void 0!==n.lastName?"".concat(n.firstName," ").concat(n.lastName):n.title;var m=function(){j(!1)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Z,{"aria-label":"contact SME",color:"default",onClick:function(){j(!0)},children:(0,i.jsx)(x.Z,{})}),(0,i.jsxs)(o.Z,{open:Z,onClose:m,children:[(0,i.jsxs)(d.Z,{children:["Contact ",t]}),(0,i.jsx)(l.Z,{children:(0,i.jsxs)(u.Z,{children:["To contact this SME or Project Owner, please login to your account first.",(0,i.jsx)(p.Z,{sx:{textAlign:"center",mt:2},children:(0,i.jsx)(s.Z,{color:"primary",variant:"contained",component:f.Z,to:{pathname:"/login"},children:"Login"})})]})}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(s.Z,{onClick:m,children:"Cancel"})})]})]})}}},function(e){e.O(0,[34,886,645,399,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);