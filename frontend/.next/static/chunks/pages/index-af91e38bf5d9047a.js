(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9055:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),a=n(5893);t.Z=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public")},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4577)}])},4577:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(5893),i=n(7294),a=n(5861),o=n(5616),s=n(5582),l=n(1233),c=n(7720),u=n(9417),d=n(6540),f=n(8390),x=n(5427),h=n(6886),p=n(5137),v=n(5767),Z=n(8100),j=n(4530);var m=n(4471),y=n(948),g=n(6242),b=n(8445),k=n(4267),S=n(2023),C=n(2485),E=n(3946),P=n(6395),w=n(1975),T=n(1292),_=n(7856),M=n.n(_),N=n(6518),I=n(7568),O=n(7582),W=n(314),z=n(6508),F="".concat(j.Sg,"/api/users/me/"),R="".concat(j.Sg,"/api/experts/");var A=n(9619),B=n(3221),L=n(9055),q=n(7918),D=(0,y.ZP)("ul")((function(e){return{display:"flex",flexWrap:"wrap",listStyle:"none",padding:0,margin:0,"& > li":{padding:e.theme.spacing(.5)}}}));function H(e){var t,n,o,s,l=e.expert,c=(0,m.kq)(),u=function(e){var t=(0,m.Fp)(),n=t.instance,r=(t.inProgress,(0,z.Z)().profile),a=(0,Z.kY)().mutate,o=(0,x.Z)(i.useState(!1),2),s=o[0],l=o[1],c=(0,x.Z)(i.useState(0),2),u=c[0],d=c[1];function f(){return h.apply(this,arguments)}function h(){return(h=(0,I.Z)((function(){var t,r,i,a,o,s,l;return(0,O.__generator)(this,(function(c){switch(c.label){case 0:return t={expert:e.id},r=(0,j.bf)("/api/favorites/"),i=[r],a={method:"POST",body:JSON.stringify(t)},o={},l=(s="Bearer ").concat,[4,(0,W.a)(n)];case 1:return[4,fetch.apply(void 0,i.concat((a.headers=(o.Authorization=l.apply(s,[c.sent()]),o["Content-Type"]="application/json",o),a)))];case 2:return[2,c.sent()]}}))}))).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,I.Z)((function(){var e,t,r,i,a,o;return(0,O.__generator)(this,(function(s){switch(s.label){case 0:return u?(e=(0,j.bf)("/api/favorites/".concat(u,"/")),t=[e],r={method:"DELETE"},i={},o=(a="Bearer ").concat,[4,(0,W.a)(n)]):[2,null];case 1:return[4,fetch.apply(void 0,t.concat((r.headers=(i.Authorization=o.apply(a,[s.sent()]),i["Content-Type"]="application/json",i),r)))];case 2:return[2,s.sent()]}}))}))).apply(this,arguments)}function y(){return(y=(0,I.Z)((function(){var e;return(0,O.__generator)(this,(function(t){switch(t.label){case 0:return s?[4,p()]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,f()];case 3:e=t.sent(),t.label=4;case 4:return(null===e||void 0===e?void 0:e.ok)&&(a(F),a(R)),[2]}}))}))).apply(this,arguments)}return i.useEffect((function(){if(r){var t=e.favoredBy.map((function(e){return e.user})).includes(r.id);if(l(t),t){var n=e.favoredBy.find((function(e){return e.user===r.id}));n&&d(n.id)}}}),[r,e]),{isFavorite:s,toggleFavorite:function(){return y.apply(this,arguments)}}}(l),d=u.isFavorite,h=u.toggleFavorite,p=(0,x.Z)(i.useState("default"),2),v=p[0],y=p[1];return i.useEffect((function(){y(d?"secondary":"default")}),[d]),(0,r.jsxs)(g.Z,{sx:{height:380},children:[(0,r.jsx)(b.Z,{avatar:(0,r.jsx)(C.Z,{sx:{bgcolor:"secondary.main"},"aria-label":"expert",component:f.Z,to:{pathname:"/experts/".concat(l.id)},alt:l.firstName,src:l.avatar}),action:(0,r.jsx)(E.Z,{component:f.Z,to:{pathname:"/experts/".concat(l.id)},children:(0,r.jsx)(P.Z,{})}),title:(0,r.jsx)(f.C,{href:"/experts/".concat(l.id),underline:"hover",children:"".concat(l.firstName," ").concat(l.lastName)}),subheader:l.title}),(0,r.jsxs)(k.Z,{sx:{pt:0},children:[(0,r.jsx)(D,{children:null===(t=l.expertProfile)||void 0===t||null===(n=t.skills)||void 0===n?void 0:n.map((function(e){return(0,r.jsx)("li",{children:(0,r.jsx)(N.Z,{skillId:e,size:"small"},e)},e)}))}),(0,r.jsx)(a.Z,{variant:"body2",color:"text.secondary",sx:{mt:2},children:(0,r.jsx)(M(),{line:4,element:"span",truncateText:"...",text:null===(o=l.expertProfile)||void 0===o?void 0:o.experience})}),(null===(s=l.expertProfile)||void 0===s?void 0:s.internationalTravel)&&(0,r.jsx)(q.Z,{sx:{mt:1},icon:(0,r.jsx)(L.Z,{}),label:"Available for International Travel",variant:"outlined",color:"primary"})]}),(0,r.jsx)(S.Z,{disableSpacing:!0,children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Z,{title:"Add to Favorites",children:(0,r.jsx)(E.Z,{"aria-label":"add to favorites",color:v,onClick:h,children:(0,r.jsx)(w.Z,{})})}),(0,r.jsx)(A.Z,{expert:l,buttonType:"icon"})]}):(0,r.jsx)(B.Z,{item:l})})]})}var X=n(5049);function J(){var e=v.Z.useContainer(),t=p.Z.useContainer(),n=X.Z.useContainer(),a=function(){var e=(0,Z.ZP)("".concat(j.Sg,"/api/experts/"),j._i),t=e.data,n=e.error;return{experts:t,isLoading:!t&&!n,isError:n}}(),o=a.experts,s=(a.isLoading,a.isError,function(e){var t;e&&(t=new URLSearchParams({q:e}));var n=(0,Z.ZP)(t?"".concat(j.Sg,"/api/experts/?").concat(t):null,j._i),r=n.data,i=n.error;return{results:r,isLoading:!r&&!i,isError:i}}(e.searchTerms).results),l=(0,x.Z)(i.useState(o),2),c=l[0],u=l[1];return i.useEffect((function(){var e;if(e=s||o,console.log(e),e&&n.internationalTravel){var r=e.filter((function(e){return e.expertProfile.internationalTravel}));console.log(r),e=r}if(e)if(t.selectedSkills.length){var i=t.selectedSkills.map((function(e){return e.id})),a=e.filter((function(e){return t.filterInclusive?i.some((function(t){return e.expertProfile.skills.includes(t)})):i.every((function(t){return e.expertProfile.skills.includes(t)}))}));u(a)}else u(e)}),[o,s,t.filterInclusive,t.selectedSkills,n.internationalTravel]),c?(0,r.jsx)(h.ZP,{container:!0,spacing:2,children:c.map((function(e){return(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(H,{expert:e})},e.id)}))}):null}function U(){var e,t,n=(0,z.Z)().profile;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{sx:{bgcolor:"background.paper",pt:3,pb:3},children:(0,r.jsxs)(s.Z,{maxWidth:"md",children:[(0,r.jsx)(a.Z,{component:"h1",variant:"h4",align:"center",color:"text.primary",gutterBottom:!0,children:"Welcome to the WHOI Skills Matcher DB"}),(0,r.jsxs)(l.Z,{sx:{mt:3},direction:"row",spacing:6,justifyContent:"center",divider:(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),children:[!(null===n||void 0===n||null===(e=n.userType)||void 0===e?void 0:e.includes("EXPERT"))&&(0,r.jsxs)(o.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(a.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to make your skills available to the WHOI community? Create a "SME Profile", and you will be listed in the Skills Matcher DB.'}),(0,r.jsx)(u.Z,{variant:"contained",startIcon:(0,r.jsx)(d.Z,{}),component:f.Z,to:{pathname:"/profile/me"},children:"Create SME Profile"})," "]}),!(null===n||void 0===n||null===(t=n.userType)||void 0===t?void 0:t.includes("PROJECT_OWNER"))&&(0,r.jsxs)(o.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(a.Z,{variant:"body1",align:"center",color:"text.secondary",paragraph:!0,children:'Want to recruit help for your research or project? Create a "Project" that you can request assistance with from one of our users.'}),(0,r.jsx)(u.Z,{variant:"outlined",startIcon:(0,r.jsx)(d.Z,{}),component:f.Z,to:{pathname:"/profile/me"},children:"Create Project"})]})]})]})}),(0,r.jsx)(o.Z,{sx:{my:2},children:(0,r.jsxs)(a.Z,{variant:"body1",color:"text.secondary",paragraph:!0,children:["The following ",(0,r.jsx)("strong",{children:"SMEs (Subject Matter Experts)"})," are available to contact for assistance:"]})}),(0,r.jsx)(o.Z,{sx:{my:4},children:(0,r.jsx)(J,{})})]})}},9619:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(5427),i=n(9815),a=n(5893),o=n(7294),s=n(9417),l=n(4034),c=n(657),u=n(1425),d=n(6580),f=n(8951),x=n(7645),h=n(6307),p=n(8462),v=n(7212),Z=n(8619),j=n(8885),m=n(9334),y=n(9368),g=n(3946),b=n(8037),k=n(1292),S=n(6508);function C(e){var t=e.expert,n=e.buttonType,C=void 0===n?"standard":n,E=(0,S.Z)(),P=E.profile,w=E.contactExpert,T=null===P||void 0===P?void 0:P.projectsOwned,_=o.useRef(),M=(0,r.Z)(o.useState(!1),2),N=M[0],I=M[1],O=(0,r.Z)(o.useState([0]),2),W=O[0],z=O[1],F=(0,r.Z)(o.useState(!1),2),R=F[0],A=F[1],B=function(){I(!0)},L=function(){A(!1),I(!1)};return(0,a.jsxs)("div",{children:["standard"===C&&(0,a.jsx)(s.Z,{sx:{my:2},variant:"contained",onClick:B,size:"small",startIcon:(0,a.jsx)(h.Z,{}),children:"Contact SME"}),"icon"===C&&(0,a.jsx)(k.Z,{title:"Contact SME",children:(0,a.jsx)(g.Z,{"aria-label":"contact SME",color:"default",onClick:B,children:(0,a.jsx)(h.Z,{})})}),(0,a.jsxs)(c.Z,{open:N,onClose:L,children:[(0,a.jsxs)(x.Z,{children:["Contact ",t.firstName," ",t.lastName]}),(0,a.jsx)(d.Z,{children:R?(0,a.jsxs)("div",{children:[(0,a.jsx)(b.Z,{color:"success",sx:{fontSize:80}}),(0,a.jsx)(f.Z,{children:"Message sent!"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(f.Z,{children:"To contact this SME, you can select one of your Projects that you\u2019d like to work with them on, or just send a direct message. We will send them your Project and contact details and notify you if they\u2019re interested."}),(0,a.jsx)(p.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:null===T||void 0===T?void 0:T.map((function(e){var t,n="checkbox-list-label-".concat(e.id);return(0,a.jsx)(v.ZP,{disablePadding:!0,children:(0,a.jsxs)(Z.Z,{role:void 0,onClick:(t=e.id,function(){var e=W.indexOf(t),n=(0,i.Z)(W);-1===e?n.push(t):n.splice(e,1),z(n)}),dense:!0,children:[(0,a.jsx)(j.Z,{children:(0,a.jsx)(y.Z,{edge:"start",checked:-1!==W.indexOf(e.id),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n}})}),(0,a.jsx)(m.Z,{id:n,primary:e.title})]})},e.id)}))}),(0,a.jsx)(l.Z,{fullWidth:!0,multiline:!0,rows:6,label:"Message",variant:"outlined",inputRef:_})]})}),!R&&(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(s.Z,{onClick:L,children:"Cancel"}),(0,a.jsx)(s.Z,{onClick:function(){w(t.id,_.current.value,W),A(!0),setTimeout(L,2e3)},children:"Send Request"})]})]})]})}},6518:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),i=(n(7294),n(7918)),a=n(5137);function o(e){var t=e.skillId,n=e.size,o=void 0===n?"medium":n,s=a.Z.useContainer(),l=function(e){function t(e,n){if(e.id===n)return e;if(e.children){var r=!0,i=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=t(o.value,n);if(l)return l}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return null}var n=null;if(s.skills){var r=!0,i=!1,a=void 0;try{for(var o,l=s.skills[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){if(n=t(o.value,e))break}}catch(c){i=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}return n}(t);return s.skills?(0,r.jsx)(i.Z,{label:null===l||void 0===l?void 0:l.name,size:o}):null}},3221:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(5427),i=n(5893),a=n(7294),o=n(9417),s=n(657),l=n(1425),c=n(6580),u=n(8951),d=n(7645),f=n(6307),x=n(8390),h=n(3946),p=n(5616);function v(e){var t,n=e.item,v=(0,r.Z)(a.useState(!1),2),Z=v[0],j=v[1];t=void 0!==n.lastName?"".concat(n.firstName," ").concat(n.lastName):n.title;var m=function(){j(!1)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Z,{"aria-label":"contact SME",color:"default",onClick:function(){j(!0)},children:(0,i.jsx)(f.Z,{})}),(0,i.jsxs)(s.Z,{open:Z,onClose:m,children:[(0,i.jsxs)(d.Z,{children:["Contact ",t]}),(0,i.jsx)(c.Z,{children:(0,i.jsxs)(u.Z,{children:["To contact this SME or Project Owner, please login to your account first.",(0,i.jsx)(p.Z,{sx:{textAlign:"center",mt:2},children:(0,i.jsx)(o.Z,{color:"primary",variant:"contained",component:x.Z,to:{pathname:"/login"},children:"Login"})})]})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(o.Z,{onClick:m,children:"Cancel"})})]})]})}}},function(e){e.O(0,[34,886,645,399,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);